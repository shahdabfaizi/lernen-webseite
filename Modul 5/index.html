<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notizen</title>
    <style>
      .sidebar {
        height: 100vh;
        width: 20%;
        background-color: #e2e2e2;
        position: fixed;
        overflow-y: auto;
      }

      .notizfeld {
        margin-left: 20%;
        height: 96vh;
        width: 78%;
        position: absolute;
        padding: 1%;
        background-color: #f2f2f2;
      }

      .newNotiz {
        width: 100%;
        height: 10vh;
        background-color: #d94862;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 2vh;
      }

      .newNotiz:hover {
        background-color: #c03756;
      }

      .note {
        background-color: #f2b950;
        margin-top: 5px;
        height: 15vh;
        width: 100%;
        border: none;
        cursor: pointer;
        color: #5a5a5a;
        font-size: 2vh;
      }

      .note:hover {
        background-color: #ce9e46;
      }

      #ueberschrift {
        width: 75%;
        height: 5vh;
        font-size: 2.5vh;
        background: none;
        border-radius: 0;
        border: none;
        outline: none;
        border-bottom: 2px solid #4b4b4b;
      }

      #ueberschrift:focus {
        border-bottom: 2px solid #00ee00;
      }

      .saveButton {
        width: 18%;
        height: 5.5vh;
        background-color: #bf8f73;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 2vh;
        margin-left: 5%;
      }

      .saveButton:hover {
        background-color: #9c755d;
      }

      #notiz {
        height: 90vh;
        width: 100%;
        margin-top: 10px;
        font-size: 2vh;
        outline: none;
        border: none;
        background-color: #e2e2e2;
        color: #222222;
      }
    </style>
  </head>
  <body style="margin: 0">
    <div class="sidebar">
      <button onclick="createNewNote()" class="newNotiz">
        Neue Notiz erstellen...
      </button>
      <div id="notesList"></div>
    </div>
    <div class="notizfeld">
      <div id="noteEditor">
        <div class="header">
          <input
            type="text"
            name="notizenUeberschrift"
            id="ueberschrift"
            placeholder="Überschrift eingeben...."
          /><button onclick="addNewNote()" class="saveButton">Speichern</button>
        </div>
        <div class="card-body">
          <textarea
            name="notiz"
            id="notiz"
            placeholder="Notiz eingeben....."
          ></textarea>
        </div>
      </div>
    </div>

    <script>
      let notizenUeberschrift = [];
      let notizen = [];

      function addNewNote() {
        const ueber = document.getElementById("ueberschrift").value;
        const notiz = document.getElementById("notiz").value;
        const id = Math.random();

        if (ueber && notiz) {
          notizenUeberschrift.push(ueber);
          notizen.push(notiz);

          document.getElementById("ueberschrift").value = "";
          document.getElementById("notiz").value = "";

          const speichern = {
            id: id,
            notizenUeberschrift: ueber,
            notiz: notiz,
          };

          saveToLocalStorage(speichern);
          displayNotes();
        } else {
          alert(
            "Speichern nicht möglich, Bitte geben Sie eine Überschrift und eine Notiz ein."
          );
        }
      }

      function saveToLocalStorage(speichern) {
        let gespeicherteNotizen =
          JSON.parse(localStorage.getItem("notizen")) || [];
        gespeicherteNotizen.push(speichern);
        localStorage.setItem("notizen", JSON.stringify(gespeicherteNotizen));
      }

      function displayNotes() {
        const notesList = document.getElementById("notesList");
        notesList.innerHTML = "";

        let gespeicherteNotizen =
          JSON.parse(localStorage.getItem("notizen")) || [];

        gespeicherteNotizen.forEach((note) => {
          const noteDiv = document.createElement("div");
          noteDiv.id = note.id;

          noteDiv.innerHTML = `
            <button class="note"><p>Überschrift: ${note.notizenUeberschrift}</p>
            <p>Notiz: ${note.notiz}</p>
            </button>
          `;

          notesList.appendChild(noteDiv);
        });
      }

      function deleteNote(id) {
        let gespeicherteNotizen =
          JSON.parse(localStorage.getItem("notizen")) || [];
        gespeicherteNotizen = gespeicherteNotizen.filter(
          (note) => note.id !== id
        );
        localStorage.setItem("notizen", JSON.stringify(gespeicherteNotizen));
        displayNotes();
      }

      function createNewNote() {
        document.getElementById("ueberschrift").value = "";
        document.getElementById("notiz").value = "";
      }

      document.addEventListener("DOMContentLoaded", () => {
        displayNotes();
      });
    </script>
  </body>
</html>
